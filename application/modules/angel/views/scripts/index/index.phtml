<!--
        	作者：vincedotnet@hotmail.com
        	时间：2015-05-28
        	描述：view的内部代码
        -->
<script src="<?php echo $this->jsPath("weixin/weixin_user.js"); ?>"></script>
<script src="<?php echo $this->jsPath("tools/calendar.js"); ?>"></script>
<script src="<?php echo $this->jsPath("tools/String.js"); ?>"></script>
<script src="<?php echo $this->jsPath("tools/meet.js"); ?>"></script>
<script src="<?php echo $this->jsPath("api/calendar.js"); ?>"></script>
<script src="<?php echo $this->jsPath("api/meet.js"); ?>"></script>
<script src="<?php echo $this->jsPath("entity/calendar.js"); ?>"></script>
<script src="<?php echo $this->jsPath("entity/meet.js"); ?>"></script>
<script src="<?php echo $this->jsPath("entity/user.js"); ?>"></script>
<script src="<?php echo $this->jsPath("action/index.js"); ?>"></script>
<div class="big-box">
    <div class="mg-ttblk" style="background:#333;color:#FFF;border-radius:5px 5px 0 0;">
        <span class="tt" id="jijj">十二月 2015</span>
        <span class="glyphicon glyphicon-menu-left mg-ttblk-i left" id="to-last-month"></span>
        <span class="glyphicon glyphicon-menu-right mg-ttblk-i right" id="to-next-month"></span>
    </div>
    <div id="real-calendar">
        <div>

        </div>
    </div>
</div>

<div class="mg-listc">
    <div id="meet-list">

    </div>
</div>

<div class="big-box transparent">
    <button class="rowbtn">
        <i class="glyphicon glyphicon-send"></i> 分享我的日历
    </button>
</div>
<script>
    var appid = '<?php echo $this->appid ?>';

    $(document).ready(function(){
        var now = new Date();
        $('#real-calendar div').Calendar({
            'weekStart' : 1,
            'date' : now
        }).on('changeDay', function(event) {
            $('#jijj').html(event.day.valueOf() + '-' + event.month.valueOf() + '-' + event.year.valueOf());
        });

        //测试
//        localStorage.clear();
        var user = new User();

        user.setUser_Id(openid);

        if (!user.valid()) {
            userLogin();
        }
        else {
            var calendar = new Calendar();
            var user_id = localStorage.getItem('user_id');
            alert(user_id);
            alert($('#day_1').attr('year'));
            alert($('#day_1').attr('month'));
            calendar.setYear($('#day_1').attr('year'));
            calendar.setMonth($('#day_1').attr('month'));
            calendar.setUser_Id(user_id);

            calendar.getSchedule();
        }
    });
</script>